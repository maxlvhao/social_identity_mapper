<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Social Identity Mapping</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <a href="/researcher.html" class="researcher-link" id="researcher-link">Researcher</a>
  <div id="app">
    <!-- Progress Bar -->
    <header id="progress-header" class="hidden">
      <div class="progress-bar">
        <div class="progress-fill" id="progress-fill"></div>
      </div>
      <div class="progress-steps">
        <span class="step" data-step="1">1. Identities</span>
        <span class="step" data-step="2">2. Rank Identities</span>
        <span class="step" data-step="3">3. Identity Strength</span>
        <span class="step" data-step="4">4. Communities</span>
        <span class="step" data-step="5">5. Rank Communities</span>
        <span class="step" data-step="6">6. Belonging</span>
        <span class="step" data-step="7">7. Participation</span>
        <span class="step" data-step="8">8. Info Norms</span>
        <span class="step" data-step="9">9. Info Map</span>
        <span class="step" data-step="10">10. Complete</span>
      </div>
    </header>

    <!-- Step 0: Landing -->
    <section id="step-landing" class="step-screen active">
      <div class="step-content centered">
        <h1>Social Identity Mapping</h1>
        <p class="subtitle">Explore your identities, communities, and how you belong.</p>

        <div class="session-info">
          <span>Session ID:</span>
          <code id="session-display">--</code>
        </div>

        <div class="intro-text">
          <p>In this activity, you will:</p>
          <ol>
            <li>List the identities you see yourself as having</li>
            <li>Reflect on how central your top identities are to you</li>
            <li>List the communities you participate in</li>
            <li>Explore your sense of belonging in your top communities</li>
            <li>Consider how participation works in those communities</li>
            <li>Map your identities and communities visually</li>
          </ol>
          <p>Your progress is saved automatically.</p>
        </div>

        <button id="start-btn" class="btn btn-primary btn-large">Begin Activity</button>
      </div>
    </section>

    <!-- Step 1: Add Identities -->
    <section id="step-1" class="step-screen">
      <div class="step-content">
        <div class="step-header">
          <h2>Step 1: Identities</h2>
          <p class="instruction">List identities you see yourself as having. Add as many as you can think of.</p>
        </div>

        <div class="examples-box">
          <p class="examples-intro">Examples:</p>
          <p class="examples-list">
            <strong>student</strong>, <strong>first-gen</strong>, <strong>gamer</strong>, <strong>international</strong>, <strong>commuter</strong>, <strong>artist</strong>, <strong>athlete</strong>, <strong>parent</strong>, <strong>introvert</strong>, <strong>activist</strong>
          </p>
        </div>

        <div class="input-section">
          <label for="new-identity-input">Enter an identity and press Enter or click Add:</label>
          <div class="input-row">
            <input type="text" id="new-identity-input" placeholder="e.g., student, gamer, parent...">
            <button id="add-identity-btn" class="btn btn-primary">Add Identity</button>
          </div>
        </div>

        <div class="identities-list-section">
          <h3>Your Identities (<span id="identities-count">0</span>)</h3>
          <div id="identities-list" class="identities-list"></div>
          <p class="hint" id="identities-hint">Add at least 3 identities to continue.</p>
        </div>

        <div class="step-nav fixed-nav">
          <div></div>
          <button id="step1-next" class="btn btn-primary" disabled>Next</button>
        </div>
      </div>
    </section>

    <!-- Step 2: Rank Identities -->
    <section id="step-2" class="step-screen">
      <div class="step-content">
        <div class="step-header">
          <h2>Step 2: Rank Your Top Identities</h2>
          <p class="instruction">Drag your top 3 most important identities to the slots below.</p>
        </div>

        <div class="rank-source-section">
          <h3>Your Identities</h3>
          <div id="identity-rank-source" class="rank-source"></div>
        </div>

        <div class="rank-target-section">
          <h3>Top 3 Most Important</h3>
          <div id="identity-rank-target" class="rank-target">
            <div class="rank-slot" data-slot="1"><span class="slot-number">1</span></div>
            <div class="rank-slot" data-slot="2"><span class="slot-number">2</span></div>
            <div class="rank-slot" data-slot="3"><span class="slot-number">3</span></div>
          </div>
          <p class="hint" id="identity-rank-hint">Drag 3 identities to the slots above.</p>
        </div>

        <div class="step-nav fixed-nav">
          <button id="step2-back" class="btn btn-secondary">Back</button>
          <button id="step2-next" class="btn btn-primary" disabled>Next</button>
        </div>
      </div>
    </section>

    <!-- Step 3: Identity Strength -->
    <section id="step-3" class="step-screen">
      <div class="step-content">
        <div class="step-header">
          <h2>Step 3: Identity Strength</h2>
          <p class="instruction">For each of your top identities, rate the following (1 = strongly disagree, 7 = strongly agree):</p>
        </div>

        <div id="identity-strength-container" class="strength-container"></div>

        <div class="step-nav fixed-nav">
          <button id="step3-back" class="btn btn-secondary">Back</button>
          <button id="step3-next" class="btn btn-primary">Next</button>
        </div>
      </div>
    </section>

    <!-- Step 4: Add Communities -->
    <section id="step-4" class="step-screen">
      <div class="step-content">
        <div class="step-header">
          <h2>Step 4: Communities</h2>
          <p class="instruction">List communities you are part of (online/offline, including loose ones). Add as many as you can think of.</p>
        </div>

        <div class="examples-box">
          <p class="examples-intro">Examples:</p>
          <p class="examples-list">
            <strong>subreddits</strong>, <strong>fandoms</strong>, <strong>professions</strong>, <strong>faith groups</strong>, <strong>Discord servers</strong>, <strong>clubs</strong>, <strong>sports teams</strong>, <strong>study groups</strong>
          </p>
        </div>

        <div class="input-section">
          <label for="new-community-input">Enter a community and press Enter or click Add:</label>
          <div class="input-row">
            <input type="text" id="new-community-input" placeholder="e.g., r/gaming, church group, work team...">
            <button id="add-community-btn" class="btn btn-primary">Add Community</button>
          </div>
        </div>

        <div class="communities-list-section">
          <h3>Your Communities (<span id="communities-count">0</span>)</h3>
          <div id="communities-list" class="communities-list"></div>
          <p class="hint" id="communities-hint">Add at least 3 communities to continue.</p>
        </div>

        <div class="step-nav fixed-nav">
          <button id="step4-back" class="btn btn-secondary">Back</button>
          <button id="step4-next" class="btn btn-primary" disabled>Next</button>
        </div>
      </div>
    </section>

    <!-- Step 5: Rank Communities -->
    <section id="step-5" class="step-screen">
      <div class="step-content">
        <div class="step-header">
          <h2>Step 5: Rank Your Top Communities</h2>
          <p class="instruction">Drag the 3 communities where you spend the most time/effort engaging to the slots below.</p>
        </div>

        <div class="rank-source-section">
          <h3>Your Communities</h3>
          <div id="community-rank-source" class="rank-source"></div>
        </div>

        <div class="rank-target-section">
          <h3>Top 3 Most Engaged</h3>
          <div id="community-rank-target" class="rank-target">
            <div class="rank-slot" data-slot="1"><span class="slot-number">1</span></div>
            <div class="rank-slot" data-slot="2"><span class="slot-number">2</span></div>
            <div class="rank-slot" data-slot="3"><span class="slot-number">3</span></div>
          </div>
          <p class="hint" id="community-rank-hint">Drag 3 communities to the slots above.</p>
        </div>

        <div class="step-nav fixed-nav">
          <button id="step5-back" class="btn btn-secondary">Back</button>
          <button id="step5-next" class="btn btn-primary" disabled>Next</button>
        </div>
      </div>
    </section>

    <!-- Step 6: Belonging Uncertainty -->
    <section id="step-6" class="step-screen">
      <div class="step-content">
        <div class="step-header">
          <h2>Step 6: Belonging</h2>
          <p class="instruction">Think about how you feel about yourself at different times. Some people pretty much always feel the same way about themselves. Other people feel differently about themselves at different times.</p>
        </div>

        <div id="belonging-container" class="belonging-container"></div>

        <div class="step-nav fixed-nav">
          <button id="step6-back" class="btn btn-secondary">Back</button>
          <button id="step6-next" class="btn btn-primary">Next</button>
        </div>
      </div>
    </section>

    <!-- Step 7: Community Participation -->
    <section id="step-7" class="step-screen">
      <div class="step-content">
        <div class="step-header">
          <h2>Step 7: Participation</h2>
          <p class="instruction">For each of your top communities, answer the following:</p>
        </div>

        <div id="participation-container" class="participation-container"></div>

        <div class="step-nav fixed-nav">
          <button id="step7-back" class="btn btn-secondary">Back</button>
          <button id="step7-next" class="btn btn-primary">Next</button>
        </div>
      </div>
    </section>

    <!-- Step 8: Information Norms -->
    <section id="step-8" class="step-screen">
      <div class="step-content">
        <div class="step-header">
          <h2>Step 8: Information Norms</h2>
          <p class="instruction">For each community, answer the following about how information and language work:</p>
        </div>

        <div id="info-norms-container" class="info-norms-container"></div>

        <div class="step-nav fixed-nav">
          <button id="step8-back" class="btn btn-secondary">Back</button>
          <button id="step8-next" class="btn btn-primary">Next</button>
        </div>
      </div>
    </section>

    <!-- Step 9: Coordinate Map -->
    <section id="step-9" class="step-screen">
      <div class="step-content full-width no-scroll">
        <div class="step-header compact">
          <h2>Step 9: Information Behavior Map</h2>
          <p class="instruction">Map the information you seek to maintain each identity or participate in each community. Consider what type of information you need and how often you seek it.</p>
        </div>

        <div id="canvas-container-step9" class="canvas-container flex-canvas coordinate-canvas">
          <div class="axis-label axis-x-left">Specialized information</div>
          <div class="axis-label axis-x-right">General information</div>
          <div class="axis-label axis-y-top">High frequency</div>
          <div class="axis-label axis-y-bottom">Low frequency</div>
          <div id="coordinate-canvas" class="coordinate-grid"></div>
        </div>

        <div class="map-legend">
          <span class="legend-item"><span class="legend-dot identity"></span> Identity</span>
          <span class="legend-item"><span class="legend-square community"></span> Community</span>
        </div>

        <div class="step-nav fixed-nav">
          <button id="step9-back" class="btn btn-secondary">Back</button>
          <button id="step9-next" class="btn btn-primary">Next</button>
        </div>
      </div>
    </section>

    <!-- Step 10: Complete -->
    <section id="step-10" class="step-screen">
      <div class="step-content no-scroll complete-screen">
        <div class="complete-header">
          <div class="complete-icon">âœ“</div>
          <h2>Activity Complete!</h2>
          <p>You mapped <strong id="final-identities">0</strong> identities and <strong id="final-communities">0</strong> communities.</p>
        </div>

        <div id="final-canvas-container" class="canvas-container final-preview coordinate-canvas">
          <div class="axis-label axis-x-left">Specialized information</div>
          <div class="axis-label axis-x-right">General information</div>
          <div class="axis-label axis-y-top">High frequency</div>
          <div class="axis-label axis-y-bottom">Low frequency</div>
          <div id="final-coordinate-canvas" class="coordinate-grid"></div>
        </div>

        <div class="map-legend">
          <span class="legend-item"><span class="legend-dot identity"></span> Identity</span>
          <span class="legend-item"><span class="legend-square community"></span> Community</span>
        </div>

        <div class="qualtrics-reminder">
          <p><strong>Next step:</strong> Download your data file to save your responses.</p>
        </div>

        <div class="step-nav fixed-nav">
          <button id="back-to-edit" class="btn btn-secondary">Back</button>
          <button id="download-btn" class="btn btn-primary">Download My Data</button>
        </div>
      </div>
    </section>
  </div>

  <script src="app.js"></script>
</body>
</html>
